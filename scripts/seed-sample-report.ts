/**
 * ç¤ºä¾‹æ—¥æŠ¥æ•°æ®æ’å…¥è„šæœ¬
 * è¿è¡Œ: npx tsx scripts/seed-sample-report.ts
 */

import 'dotenv/config';
import { db } from '@/db';
import { dailyReport, dailyTopic, user } from '@/db/schema';

async function seedSampleReport() {
  console.log('ğŸš€ å¼€å§‹æ’å…¥ç¤ºä¾‹æ—¥æŠ¥...\n');

  // æŸ¥è¯¢ç¬¬ä¸€ä¸ªç”¨æˆ·
  console.log('ğŸ” æŸ¥è¯¢ç”¨æˆ·...');
  const users = await db.select().from(user).limit(1);

  if (users.length === 0) {
    console.error('âŒ é”™è¯¯ï¼šæ•°æ®åº“ä¸­æ²¡æœ‰ç”¨æˆ·ï¼');
    console.error('   è¯·å…ˆæ³¨å†Œä¸€ä¸ªç”¨æˆ·ï¼Œç„¶åå†è¿è¡Œæ­¤è„šæœ¬ã€‚');
    console.error('   è®¿é—®: http://localhost:3000/auth/register\n');
    process.exit(1);
  }

  const userId = users[0].id;
  console.log(`âœ… æ‰¾åˆ°ç”¨æˆ·: ${users[0].email || users[0].name || userId}\n`);

  // åˆ›å»ºæ—¥æŠ¥
  const reportDate = new Date('2025-11-05');
  const reportId = `report_${Date.now()}`;

  console.log('ğŸ“ åˆ›å»ºæ—¥æŠ¥...');
  await db.insert(dailyReport).values({
    id: reportId,
    date: reportDate,
    title: '2025å¹´11æœˆ5æ—¥ AIå‡ºæµ·ç¤¾ç¾¤æ—¥æŠ¥',
    summary:
      'ä»Šæ—¥çƒ­ç‚¹ï¼šCursor æ–°åŠŸèƒ½æµ‹è¯„ã€AI å®¢æœè½åœ°ç»éªŒåˆ†äº«ã€ç‹¬ç«‹å¼€å‘è€…å‡ºæµ·æ¡ˆä¾‹ã€Vercel AI SDK 3.0 æ›´æ–°ã€‚æœ¬æœŸæ¶µç›–æŠ€æœ¯å®æˆ˜ã€äº§å“æ¡ˆä¾‹å’Œå·¥å…·æ¨èç­‰å¤šä¸ªè¯é¢˜ã€‚',
    status: 'published',
    views: 128,
    likes: 23,
    commentCount: 0,
    year: 2025,
    month: 11,
    createdBy: userId,
    createdAt: new Date(),
    updatedAt: new Date(),
    publishedAt: new Date(),
  });

  console.log(`âœ… æ—¥æŠ¥å·²åˆ›å»º: ${reportId}\n`);

  // åˆ›å»ºè¯é¢˜
  const topics = [
    {
      title: 'Cursor æ–°åŠŸèƒ½æµ‹è¯„ï¼šAI è¡¥å…¨å‡†ç¡®ç‡æå‡ 40%',
      summary:
        'å¤šä½å¼€å‘è€…åˆ†äº«äº† Cursor æœ€æ–°ç‰ˆæœ¬çš„ä½¿ç”¨ä½“éªŒï¼Œé‡ç‚¹å…³æ³¨ AI ä»£ç è¡¥å…¨çš„å‡†ç¡®ç‡æå‡ã€‚@å¼ ä¸‰ è¡¨ç¤º"æ–°ç‰ˆæœ¬çš„ä¸Šä¸‹æ–‡ç†è§£èƒ½åŠ›æ˜æ˜¾å¢å¼ºï¼Œå°¤å…¶æ˜¯åœ¨ React ç»„ä»¶ç¼–å†™æ—¶"ã€‚@æå›› è¡¥å……è¯´"å¤šæ–‡ä»¶ç¼–è¾‘æ¨¡å¼å¾ˆå®ç”¨ï¼Œå¯ä»¥åŒæ—¶ä¿®æ”¹ç›¸å…³çš„å¤šä¸ªæ–‡ä»¶"ã€‚ç¤¾ç¾¤æˆå‘˜æ™®éè®¤ä¸ºæ–°ç‰ˆæœ¬å€¼å¾—å‡çº§ã€‚',
      editorNote:
        'ğŸ’¡ ç¼–è¾‘ç‚¹è¯„ï¼šCursor ä½œä¸º AI ç¼–ç¨‹å·¥å…·çš„é¢†è·‘è€…ï¼ŒæŒç»­ä¼˜åŒ–ç”¨æˆ·ä½“éªŒã€‚å¯¹äºç‹¬ç«‹å¼€å‘è€…è€Œè¨€ï¼Œå·¥å…·çš„é€‰æ‹©ç›´æ¥å½±å“å¼€å‘æ•ˆç‡ï¼Œå»ºè®®å¤§å®¶å…³æ³¨è¿™ç±»å·¥å…·çš„æœ€æ–°åŠ¨æ€ã€‚',
      category: 'å·¥å…·æ¨è',
      importance: 5,
      tags: ['AIç¼–ç¨‹', 'Cursor', 'å¼€å‘å·¥å…·'],
      sortOrder: 0,
    },
    {
      title: 'AI å®¢æœè½åœ°å®æˆ˜ï¼šå¦‚ä½•ä» 0 åˆ° 1 æ­å»ºæ™ºèƒ½å®¢æœç³»ç»Ÿ',
      summary:
        '@ç‹äº” åˆ†äº«äº†ä»–ä»¬å›¢é˜Ÿæ­å»º AI å®¢æœç³»ç»Ÿçš„å®Œæ•´ç»éªŒã€‚æŠ€æœ¯æ ˆé€‰æ‹©äº† Vercel AI SDK + OpenAI APIï¼Œå®ç°äº†è‡ªåŠ¨å›ç­”å¸¸è§é—®é¢˜ã€æ™ºèƒ½åˆ†æµã€äººå·¥ä»‹å…¥ç­‰åŠŸèƒ½ã€‚å…³é”®ç»éªŒåŒ…æ‹¬ï¼š1ï¼‰æå‰å‡†å¤‡é«˜è´¨é‡çš„çŸ¥è¯†åº“ï¼›2ï¼‰è®¾ç½®åˆç†çš„ç½®ä¿¡åº¦é˜ˆå€¼ï¼ˆå»ºè®® 0.7 ä»¥ä¸Šæ‰è‡ªåŠ¨å›ç­”ï¼‰ï¼›3ï¼‰ä¿ç•™äººå·¥ä»‹å…¥å…¥å£ã€‚ç›®å‰è¯¥ç³»ç»Ÿå·²å¤„ç† 10000+ æ¬¡å¯¹è¯ï¼Œå‡†ç¡®ç‡è¾¾ 85%ï¼Œå¤§å¹…é™ä½äº†äººå·¥å®¢æœå‹åŠ›ã€‚',
      editorNote:
        'ğŸ“Š ç¼–è¾‘ç‚¹è¯„ï¼šAI å®¢æœæ˜¯ AI æŠ€æœ¯è½åœ°çš„å…¸å‹åœºæ™¯ä¹‹ä¸€ã€‚è¿™ä¸ªæ¡ˆä¾‹çš„ä»·å€¼åœ¨äºæä¾›äº†å…·ä½“çš„æŠ€æœ¯æ–¹æ¡ˆå’Œè¸©å‘ç»éªŒï¼Œå¯¹äºæƒ³è¦å°† AI é›†æˆåˆ°äº§å“ä¸­çš„å¼€å‘è€…å¾ˆæœ‰å‚è€ƒä»·å€¼ã€‚',
      category: 'æŠ€æœ¯æ•™ç¨‹',
      importance: 5,
      tags: ['AIå®¢æœ', 'Vercel AI SDK', 'OpenAI'],
      sortOrder: 1,
    },
    {
      title: 'ç‹¬ç«‹å¼€å‘è€…å‡ºæµ·æ¡ˆä¾‹ï¼šSaaS å·¥å…·æœˆæ”¶å…¥ç ´ $5000',
      summary:
        '@èµµå…­ åˆ†äº«äº†ä»–çš„ SaaS äº§å“ä» 0 åˆ°æœˆæ”¶å…¥ $5000 çš„å†ç¨‹ã€‚äº§å“æ˜¯ä¸€ä¸ªé¢å‘æµ·å¤–å¸‚åœºçš„ AI å†™ä½œå·¥å…·ï¼Œä¸»è¦ç”¨æˆ·æ˜¯å†…å®¹åˆ›ä½œè€…ã€‚å…³é”®ç»éªŒï¼š1ï¼‰é€‰æ‹©äº† Product Hunt ä½œä¸ºé¦–å‘å¹³å°ï¼Œè·å¾—äº†ç¬¬ä¸€æ‰¹ç§å­ç”¨æˆ·ï¼›2ï¼‰é‡‡ç”¨ Stripe å¤„ç†æ”¯ä»˜ï¼Œæ”¯æŒæœˆä»˜å’Œå¹´ä»˜ï¼›3ï¼‰é€šè¿‡ Twitter å’Œ Reddit æŒç»­è·å®¢ï¼›4ï¼‰é‡è§†ç”¨æˆ·åé¦ˆï¼Œå¿«é€Ÿè¿­ä»£äº§å“ã€‚ç›®å‰æœ‰ 200+ ä»˜è´¹ç”¨æˆ·ï¼Œæœˆæµå¤±ç‡æ§åˆ¶åœ¨ 5% ä»¥å†…ã€‚',
      editorNote:
        'ğŸš€ ç¼–è¾‘ç‚¹è¯„ï¼šè¿™æ˜¯ä¸€ä¸ªå¾ˆå…¸å‹çš„ç‹¬ç«‹å¼€å‘è€…å‡ºæµ·æˆåŠŸæ¡ˆä¾‹ã€‚ä»æŠ€æœ¯å®ç°åˆ°è¥é”€è·å®¢éƒ½æœ‰è¯¦ç»†åˆ†äº«ï¼Œç‰¹åˆ«æ˜¯ Product Hunt é¦–å‘ç­–ç•¥å€¼å¾—å€Ÿé‰´ã€‚',
      category: 'äº§å“æ¡ˆä¾‹',
      importance: 5,
      tags: ['ç‹¬ç«‹å¼€å‘', 'å‡ºæµ·', 'SaaS', 'Product Hunt'],
      sortOrder: 2,
    },
    {
      title: 'Vercel AI SDK 3.0 æ­£å¼å‘å¸ƒï¼šæ”¯æŒæµå¼ UI ç»„ä»¶',
      summary:
        'Vercel å®˜æ–¹å®£å¸ƒ AI SDK 3.0 æ­£å¼å‘å¸ƒï¼Œæ ¸å¿ƒæ›´æ–°åŒ…æ‹¬ï¼š1ï¼‰Streaming UI - æ”¯æŒæµå¼æ¸²æŸ“ React ç»„ä»¶ï¼›2ï¼‰Tool Calling - æ›´ç®€æ´çš„å‡½æ•°è°ƒç”¨ APIï¼›3ï¼‰å¤šæ¨¡å‹æ”¯æŒ - ç»Ÿä¸€æ¥å£æ”¯æŒ OpenAIã€Anthropicã€Google ç­‰å¤šå®¶ AI æä¾›å•†ã€‚@é’±ä¸ƒ ç¬¬ä¸€æ—¶é—´è¿›è¡Œäº†æµ‹è¯•ï¼š"æµå¼ UI ç»„ä»¶çœŸçš„å¾ˆæƒŠè‰³ï¼Œå¯ä»¥å®ç°ç±»ä¼¼ ChatGPT çš„æ‰“å­—æœºæ•ˆæœï¼Œç”¨æˆ·ä½“éªŒæå‡æ˜æ˜¾"ã€‚',
      editorNote:
        'âš¡ ç¼–è¾‘ç‚¹è¯„ï¼šVercel AI SDK æ˜¯æ„å»º AI åº”ç”¨çš„ä¼˜ç§€å·¥å…·ï¼Œ3.0 ç‰ˆæœ¬çš„æµå¼ UI åŠŸèƒ½è§£å†³äº†å¾ˆå¤šå¼€å‘è€…çš„ç—›ç‚¹ã€‚æ¨èå¤§å®¶å…³æ³¨å®˜æ–¹æ–‡æ¡£å­¦ä¹ æ–°ç‰¹æ€§ã€‚',
      category: 'è¡Œä¸šåŠ¨æ€',
      importance: 4,
      tags: ['Vercel', 'AI SDK', 'React', 'æµå¼æ¸²æŸ“'],
      sortOrder: 3,
    },
    {
      title: 'å¦‚ä½•é€‰æ‹©åˆé€‚çš„ AI æ¨¡å‹ï¼šGPT-4 vs Claude vs Gemini',
      summary:
        'ç¤¾ç¾¤å±•å¼€äº†å…³äº AI æ¨¡å‹é€‰æ‹©çš„æ·±å…¥è®¨è®ºã€‚@å­™å…« æ€»ç»“äº†å„æ¨¡å‹çš„ç‰¹ç‚¹ï¼šGPT-4 - ç»¼åˆèƒ½åŠ›æœ€å¼ºï¼Œé€‚åˆå¤æ‚ä»»åŠ¡ï¼›Claude - é•¿æ–‡æœ¬å¤„ç†å‡ºè‰²ï¼Œä¸Šä¸‹æ–‡çª—å£å¤§ï¼›Gemini - Google ç”Ÿæ€é›†æˆå¥½ï¼Œå¤šæ¨¡æ€èƒ½åŠ›å¼ºã€‚@å‘¨ä¹ è¡¥å……äº†æˆæœ¬è€ƒè™‘ï¼š"å¦‚æœæ˜¯é«˜é¢‘è°ƒç”¨çš„åœºæ™¯ï¼Œå¯ä»¥è€ƒè™‘ GPT-3.5 æˆ– Claude Instant é™ä½æˆæœ¬"ã€‚æœ€ç»ˆå»ºè®®ï¼šæ ¹æ®å…·ä½“ä½¿ç”¨åœºæ™¯é€‰æ‹©ï¼Œå¿…è¦æ—¶å¯ä»¥ç»„åˆä½¿ç”¨å¤šä¸ªæ¨¡å‹ã€‚',
      editorNote:
        'ğŸ¤” ç¼–è¾‘ç‚¹è¯„ï¼šæ¨¡å‹é€‰æ‹©æ˜¯ AI åº”ç”¨å¼€å‘çš„é‡è¦å†³ç­–ç‚¹ã€‚è¿™ä¸ªè®¨è®ºä»åŠŸèƒ½ã€æˆæœ¬ã€åœºæ™¯ç­‰å¤šä¸ªç»´åº¦è¿›è¡Œäº†å¯¹æ¯”ï¼Œå¯¹å¼€å‘è€…å¾ˆæœ‰å‚è€ƒä»·å€¼ã€‚',
      category: 'é—®ç­”ç²¾é€‰',
      importance: 4,
      tags: ['GPT-4', 'Claude', 'Gemini', 'æ¨¡å‹é€‰æ‹©'],
      sortOrder: 4,
    },
    {
      title: 'å‡ºæµ·å¿…å¤‡ï¼šå¦‚ä½•ç”³è¯·å’Œé…ç½® Stripe æ”¯ä»˜',
      summary:
        '@å´å è¯¦ç»†åˆ†äº«äº† Stripe ç”³è¯·å’Œé…ç½®çš„å®Œæ•´æµç¨‹ã€‚å…³é”®æ­¥éª¤ï¼š1ï¼‰å‡†å¤‡èµ„æ–™ - éœ€è¦å…¬å¸ä¿¡æ¯ï¼ˆå¯ç”¨ä¸ªäººï¼‰ã€é“¶è¡Œè´¦æˆ·ã€èº«ä»½è¯æ˜ï¼›2ï¼‰åˆ›å»ºè´¦å· - å¡«å†™ä¸šåŠ¡ä¿¡æ¯ï¼Œé€‰æ‹©ä¸šåŠ¡ç±»å‹ï¼›3ï¼‰é›†æˆ SDK - ä½¿ç”¨ Stripe å®˜æ–¹åº“æˆ– Next.js é›†æˆï¼›4ï¼‰æµ‹è¯•æ¨¡å¼ - å…ˆç”¨æµ‹è¯•æ¨¡å¼éªŒè¯åŠŸèƒ½ï¼›5ï¼‰æ­£å¼ä¸Šçº¿ - å®Œæˆè®¤è¯ååˆ‡æ¢åˆ°ç”Ÿäº§æ¨¡å¼ã€‚ç‰¹åˆ«æé†’ï¼šä¸­å›½å¤§é™†éœ€è¦é¦™æ¸¯æˆ–ç¾å›½å…¬å¸æ‰èƒ½ç”³è¯·ï¼Œä¸ªäººå¼€å‘è€…å¯ä»¥è€ƒè™‘ç”¨é¦™æ¸¯å…¬å¸æˆ–æ‰¾ä»£ç†ã€‚',
      editorNote:
        'ğŸ’° ç¼–è¾‘ç‚¹è¯„ï¼šStripe æ˜¯ç‹¬ç«‹å¼€å‘è€…å‡ºæµ·æ”¶æ¬¾çš„é¦–é€‰æ–¹æ¡ˆã€‚è¿™ç¯‡åˆ†äº«æ¶µç›–äº†ç”³è¯·æµç¨‹å’ŒæŠ€æœ¯é›†æˆï¼Œå¯¹æ–°æ‰‹å¾ˆå‹å¥½ã€‚',
      category: 'å‡ºæµ·ç»éªŒ',
      importance: 4,
      tags: ['Stripe', 'æ”¯ä»˜', 'å‡ºæµ·', 'æ”¶æ¬¾'],
      sortOrder: 5,
    },
    {
      title: 'Next.js 15 æ€§èƒ½ä¼˜åŒ–æŠ€å·§ï¼šè®©ä½ çš„åº”ç”¨å¿« 3 å€',
      summary:
        '@éƒ‘åä¸€ åˆ†äº«äº† Next.js 15 æ€§èƒ½ä¼˜åŒ–çš„å®æˆ˜ç»éªŒã€‚æ ¸å¿ƒæŠ€å·§åŒ…æ‹¬ï¼š1ï¼‰ä½¿ç”¨ Partial Prerendering (PPR) ä¼˜åŒ–é¦–å±åŠ è½½ï¼›2ï¼‰åˆç†ä½¿ç”¨ Server Components å‡å°‘å®¢æˆ·ç«¯ JavaScriptï¼›3ï¼‰å›¾ç‰‡ä¼˜åŒ– - ä½¿ç”¨ next/image è‡ªåŠ¨å¤„ç†ï¼›4ï¼‰å­—ä½“ä¼˜åŒ– - ä½¿ç”¨ next/font é¿å…å¸ƒå±€åç§»ï¼›5ï¼‰ä»£ç åˆ†å‰² - ä½¿ç”¨åŠ¨æ€å¯¼å…¥æ‹†åˆ†å¤§å‹ç»„ä»¶ã€‚å®æ–½è¿™äº›ä¼˜åŒ–åï¼Œä»–ä»¬çš„äº§å“ LCP ä» 3.5s é™ä½åˆ° 1.2sï¼Œæ€§èƒ½æå‡æ˜æ˜¾ã€‚',
      editorNote:
        'âš¡ ç¼–è¾‘ç‚¹è¯„ï¼šæ€§èƒ½ä¼˜åŒ–æ˜¯äº§å“ä½“éªŒçš„å…³é”®ã€‚è¿™äº›æŠ€å·§éƒ½æ˜¯ Next.js 15 çš„æœ€ä½³å®è·µï¼Œå»ºè®®å¼€å‘è€…åœ¨é¡¹ç›®ä¸­é€æ­¥åº”ç”¨ã€‚',
      category: 'æŠ€æœ¯æ•™ç¨‹',
      importance: 4,
      tags: ['Next.js', 'æ€§èƒ½ä¼˜åŒ–', 'React', 'å‰ç«¯'],
      sortOrder: 6,
    },
  ];

  console.log('ğŸ“š åˆ›å»ºè¯é¢˜...');
  for (const [index, topic] of topics.entries()) {
    await db.insert(dailyTopic).values({
      id: `topic_${Date.now()}_${index}`,
      reportId,
      title: topic.title,
      summary: topic.summary,
      editorNote: topic.editorNote,
      category: topic.category,
      importance: topic.importance,
      tags: topic.tags,
      sourceMessages: [],
      sourceGroup: 'demo_group',
      views: Math.floor(Math.random() * 50) + 20,
      likes: Math.floor(Math.random() * 15) + 5,
      commentCount: 0,
      sortOrder: topic.sortOrder,
      createdAt: new Date(),
      updatedAt: new Date(),
    });

    console.log(`  âœ… ${topic.category} - ${topic.title.substring(0, 30)}...`);
  }

  console.log('\nğŸ‰ ç¤ºä¾‹æ—¥æŠ¥åˆ›å»ºæˆåŠŸï¼');
  console.log(`\nğŸ“– è®¿é—®åœ°å€: http://localhost:3000/reports/${reportId}`);
  console.log('   æˆ–è®¿é—®: http://localhost:3000/reports (æŸ¥çœ‹åˆ—è¡¨)\n');
}

// è¿è¡Œè„šæœ¬
seedSampleReport()
  .then(() => {
    console.log('âœ¨ å®Œæˆï¼');
    process.exit(0);
  })
  .catch((error) => {
    console.error('âŒ é”™è¯¯:', error);
    process.exit(1);
  });
