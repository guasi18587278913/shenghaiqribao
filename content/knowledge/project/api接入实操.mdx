---
title: API接入实操
description: 项目规划、开发流程、部署上线
category: 项目执行
tags: ["出海开发"]
importance: 3
---

# API接入实操

### 必备平台
1. OpenAI（ChatGPT）
2. Anthropic（Claude）
3. Google AI（Gemini）
4. OpenRouter（聚合，多模型）

全部支持 Google 账号登陆，无需额外邮件注册。OpenRouter 无免费额度，首次使用需最低充值 5–10 美元。

### 典型错误
- **401 Unauthorized**：Header 未正确添加 `Authorization: Bearer sk-...`；或余额不足。
- **“API credentials missing”**：`.env` 未加载/拼写错。重启 dev server，确保 `.env` 在项目根目录并已被读取。
- **“This model provider doesn't serve your region”**：网络节点被识别，需开启 TUN、安装组件、切到美国节点、将 Cursor 设置里的 Network 协议改为 HTTP/1.1。
- **免费模型排队/限额用尽**：及时充值或更换供应商（硅基流动、智谱等）。

### API Key 管理与风控

> **Note (warning):** - **限额**：在 OpenRouter / Anthropic / OpenAI 设置每日、每月上限与提醒阈值，避免被盗刷。

> **Note (warning):** - **多 Key 策略**：按项目划分 key（生产、测试、个人），限额分别设置，便于统计并降低风险。

> **Note (warning):** - **存储方式**：永远不要把 key 写进代码仓库。使用密码管理器或 `.env`，并在 `.gitignore` 忽略。
- **暴露应急预案**：5 分钟内 revoke；1 小时内换新 Key、更新项目、检查账单。直播/共享屏幕前务必确认日志和代码中没有敏感信息。

> **Note (info):** - **OpenRouter 特别提示**：Key 只显示一次，生成后必须立即复制，忘记只能删掉重生成。

### `.env` 常见坑

> **Note (warning):** - 不要带 `Bearer` 前缀（老蔡踩坑）——`.env` 里只写 `OPENAI_API_KEY=sk-xxxx`。
- `.env` 文件默认不提交 Git，部署到 Vercel 时需在项目 settings → Environment Variables 中逐条复制。

---
